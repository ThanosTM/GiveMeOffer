## 9、TCP确保可靠数据传输
#### 校验和
计算方式：覆盖TCP首部和数据段，发送方计算每16位进行==累加、回卷、取反==，接收方验证校验和与校验和字段相加为全“1”

#### 确认应答与序列号
- 序列号：报文数据段中首字节的编号，而非数据包的编号
- 确认号：主机A期望收到的下一个字节的序号
- 累计确认：只确认该流中至第一个丢失的字节流为止，即确认号之前的序号已全部确认无误接收

#### 超时重传
- 三种情况的超时重传：发送方数据包丢包，接收方ACK丢包，ACK到达时间过长
- 超时间隔加倍：形式首受限的拥塞控制，定时器超时有可能是由于网络拥塞引起，频繁地重传分组将使得拥塞更为严重

#### 连接管理
三次握手与四次挥手，保证可靠的连接

#### 流量控制
- （注意与拥塞控制区分）：流量控制是为了防止发送方发送速度过快，使得接收方缓冲区溢出而发生丢包。
- 实现：TCP首部的接收窗口大小字段表征接收方的缓冲区剩余，发送方根据这个数值动态改变发送数据的速率
- 特殊情况：当发送方接收到窗口为0时将停止发送，而如何知晓接收方有新的缓冲区大小了？——定时发送窗口探测数据包

#### 拥塞控制
慢启动、拥塞避免、快速恢复，“加性增，乘性减”

- 拥塞窗口：将和接收窗口对比，取较小值作为实际发送窗口
- 慢启动：指数级增加拥塞窗口，快速提升发送速率
- 拥塞避免：拥塞窗口超过设定阈值时（之前最大拥塞窗口的一半），表明已接近拥塞，线性增加拥塞窗口
- 快速恢复：连续三个冗余的ACK，表征中间数据包很有可能已经丢失，将对丢失的数据包进行快速重传


## 10、TCP与UDP的对比
1. TCP面向连接（如打电话要先拨号建立连接）;UDP是无连接的，即发送数据之前不需要建立连接
2. TCP提供可靠的服务。也就是说，通过TCP连接传送的数据，无差错，不丢失，不重复，且按序到达;UDP尽最大努力交付，即不保   证可靠交付
3. TCP面向字节流，实际上是TCP把数据看成一连串无结构的字节流;UDP是面向报文的UDP没有拥塞控制，因此网络出现拥塞不会使源主机的发送速率降低（对实时应用很有用，如IP电话，实时视频会议等）
4. 每一条TCP连接只能是点到点的;UDP支持一对一，一对多，多对一和多对多的交互通信
5. TCP首部开销20字节;UDP的首部开销小，只有8个字节
6. TCP的逻辑通信信道是全双工的可靠信道，UDP则是不可靠信道

#### 对“面向字节流”和“面向数据报”的理解
- 面向数据报：调用一次sento()发送100字节，接收端也需要对应调用一次recvfrom()接收100字节，而不能调用10次每次接收10字节。应用层交给UDP多长的报文，UDP会原样进行发送，不会拆分也不会合并
- 面向字节流：由于缓冲区的存在，读写不需要一一匹配，应用层交给TCP字节流，先存在缓冲区中，若数据块太长，TCP会先进行划分再传送，如果发送数据块太短，TCP可能积累足够多的字节后发送出去。


## 11、TCP/IP协议栈理解
#### 应用层
提供进程间的通信协议，定义数据格式并按照格式解析数据，例如HTTP、FTP、SMTP

#### 传输层
提供进程间的逻辑通信的功能，TCP、UDP

#### 网络层
提供主机间的逻辑通信的功能，IP协议、路由协议、ARP协议

#### 链路层
将数据报通过单一的通信链路从一个节点移动到另一节点，以太网协议、801.11Wifi协议



